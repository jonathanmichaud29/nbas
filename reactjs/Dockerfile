FROM node:18.2.0-alpine3.15
WORKDIR /app

# add `/app/node_modules/.bin` to $PATH
ENV PATH /app/node_modules/.bin:$PATH

COPY ./my-app/package.json .

RUN npm install

ARG FIREBASE_APIKEY
ARG FIREBASE_AUTHDOMAIN
ARG FIREBASE_PROJECTID
ARG FIREBASE_STORAGEBUCKET
ARG FIREBASE_MESSAGINGSENDERID
ARG FIREBASE_APPID
ARG API_DOMAIN

ENV REACT_APP_FIREBASE_APIKEY=$FIREBASE_APIKEY \
  REACT_APP_FIREBASE_AUTHDOMAIN=$FIREBASE_AUTHDOMAIN \
  REACT_APP_FIREBASE_PROJECTID=$FIREBASE_PROJECTID \
  REACT_APP_FIREBASE_STORAGEBUCKET=$FIREBASE_STORAGEBUCKET \
  REACT_APP_FIREBASE_MESSAGINGSENDERID=$FIREBASE_MESSAGINGSENDERID \
  REACT_APP_FIREBASE_APPID=$FIREBASE_APPID \
  REACT_APP_API_DOMAIN=$API_DOMAIN

#CMD ["npm", "start"]
